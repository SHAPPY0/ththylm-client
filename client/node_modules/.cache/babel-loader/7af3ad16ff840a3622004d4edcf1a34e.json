{"ast":null,"code":"import _regeneratorRuntime from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import{Axios_Instance}from'../utils/axiosInterceptor';import{BASEURL,ROUTES}from'../config/routes';import{checkAuthorization,getUserDetails,FormatDate,GetStatusByDateTime,Notification,DateDiffFormat}from'../utils';var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this);_this.state={user:{},wishTitle:'Good Morning',feeds:{\"today\":[],\"upcoming\":[],\"completed\":[]},feed:\"\",feed_posts:[]};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var details;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return checkAuthorization(this.props);case 2:this.setWishTitle();details=getUserDetails();this.setState({user:details});this.fetchFeedPosts();this.fetchFeeds();case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"setWishTitle\",value:function setWishTitle(){var wishTitle=this.state.wishTitle;var currentDate=new Date();var currentTime=currentDate.toString().split(' ')[4];var timeSegments=currentTime.split(':');if(timeSegments>='12'){wishTitle='Good After Noon';}if(timeSegments>='17'){wishTitle='Good Evening';}this.setState({wishTitle:wishTitle});}},{key:\"fetchFeeds\",value:function(){var _fetchFeeds=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _resp,feeds,data,obj,i,s_dt,e_e_dt,cur_date,_status;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Axios_Instance.get(\"\".concat(ROUTES.event_feeds));case 3:_resp=_context2.sent;if(_resp){_context2.next=7;break;}_resp={data:{success:false,msg:'Unexpected error occured'}};return _context2.abrupt(\"return\");case 7:if(_resp.data&&_resp.data.success){feeds=this.state.feeds;data=_resp.data.data.events;obj={\"today\":[],\"upcoming\":[]};for(i=0;i<data.length;i++){s_dt=data[i].start_time;e_e_dt=data[i].expected_end_time;cur_date=new Date().setHours(0,0,0,0);if(new Date(s_dt).setHours(0,0,0,0)<=cur_date&&new Date(e_e_dt).setHours(0,0,0,0)>=cur_date){_status=GetStatusByDateTime(data[i].start_time,data[i].expected_end_time);data[i].status=_status;obj.today.push(data[i]);}else{obj.upcoming.push(data[i]);}}feeds=obj;this.setState({feeds:feeds});}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);Notification({show:true,data:{success:false,msg:_context2.t0?_context2.t0.response?_context2.t0.response.data:_context2.t0:\"Exception ocurred\"}});case 13:case\"end\":return _context2.stop();}}},_callee2,this,[[0,10]]);}));function fetchFeeds(){return _fetchFeeds.apply(this,arguments);}return fetchFeeds;}()},{key:\"OnFeedFieldChange\",value:function OnFeedFieldChange(e){var feed=this.state.feed;feed=e.target.value;this.setState({feed:feed});}},{key:\"fetchFeedPosts\",value:function(){var _fetchFeedPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _resp,feed_posts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Axios_Instance.get(\"\".concat(ROUTES.fetch_feeds));case 3:_resp=_context3.sent;if(_resp&&_resp.data&&_resp.data.success){feed_posts=this.state.feed_posts;feed_posts=_resp.data.data.feeds;this.setState({feed_posts:feed_posts});}_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);Notification({show:true,data:{success:false,msg:_context3.t0?_context3.t0.response?_context3.t0.response.data:_context3.t0:\"Exception ocurred\"}});case 10:case\"end\":return _context3.stop();}}},_callee3,this,[[0,7]]);}));function fetchFeedPosts(){return _fetchFeedPosts.apply(this,arguments);}return fetchFeedPosts;}()},{key:\"PostFeed\",value:function(){var _PostFeed=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var feed,reqBody,_resp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:feed=this.state.feed;if(feed){_context4.next=4;break;}Notification({show:true,data:{success:false,msg:\"Nothing to post\"}});return _context4.abrupt(\"return\");case 4:;reqBody={\"feed\":feed,\"channel_id\":localStorage.getItem(\"selItem\"),\"type\":\"text\"};_context4.prev=6;_context4.next=9;return Axios_Instance.post(\"\".concat(ROUTES.post_feed),reqBody);case 9:_resp=_context4.sent;if(_resp&&_resp.data&&_resp.data.success){Notification({show:true,data:{success:true,msg:\"Post added successfully\"}});this.fetchFeedPosts();}_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](6);Notification({show:true,data:{success:false,msg:_context4.t0?_context4.t0.response?_context4.t0.response.data:_context4.t0:\"Exception ocurred\"}});case 16:case\"end\":return _context4.stop();}}},_callee4,this,[[6,13]]);}));function PostFeed(){return _PostFeed.apply(this,arguments);}return PostFeed;}()},{key:\"redirectUrl\",value:function redirectUrl(url){window.open(url.String,\"_blank\");}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"main-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"page-title\"},/*#__PURE__*/React.createElement(\"p\",{style:{'textTransform':'capitalize'}},this.state.wishTitle,\"! \",this.state.user.first_name||'Guest')),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-6\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"theme-color\"},/*#__PURE__*/React.createElement(\"b\",null,\"Feeds\")),this.state.user.user_type===1&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"textarea\",{rows:\"2\",className:\"form-control\",name:\"feed\",placeholder:\"Write to share...\",onChange:this.OnFeedFieldChange.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{style:{\"float\":\"right\",\"marginTop\":\"5px\"}},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.PostFeed.bind(this)},\"POST\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"feedPosts\"},this.state.feed_posts.map(function(obj,k){return/*#__PURE__*/React.createElement(\"div\",{className:\"card eachFeedPost\",key:k},/*#__PURE__*/React.createElement(\"div\",{className:\"channelName\"},obj.logo_url&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(BASEURL).concat(obj.logo_url),alt:obj.channel_name}),!obj.logo_url&&/*#__PURE__*/React.createElement(\"div\",{className:\"blankLogo\"},obj.channel_name[0]),/*#__PURE__*/React.createElement(\"p\",null,obj.channel_name)),/*#__PURE__*/React.createElement(\"div\",{style:{\"clear\":\"both\"}},/*#__PURE__*/React.createElement(\"p\",null,obj.feed),/*#__PURE__*/React.createElement(\"small\",{style:{fontSize:\"10px\",color:\"#9fa2a4\"}},DateDiffFormat(obj.created_at)||'--')));}),this.state.feed_posts.length===0&&/*#__PURE__*/React.createElement(\"div\",{style:{\"textAlign\":\"center\",\"padding\":\"20px\",\"color\":\"#b0acac\"}},\"No New Feeds\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-6 borderLeft\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"theme-color\"},/*#__PURE__*/React.createElement(\"b\",null,\"Events\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"p\",{style:{\"color\":\"#838c90\"}},/*#__PURE__*/React.createElement(\"b\",null,\"Today\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.feeds.today.map(function(obj,k){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6 col-md-6\",key:k},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"LiveCard\"},obj.thumbnail&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(BASEURL).concat(obj.thumbnail),className:\"live_img\",alt:obj.title}),!obj.thumbnail&&/*#__PURE__*/React.createElement(\"div\",{style:{\"height\":\"150px\",\"width\":\"100%\",\"background\":\"#ccc\",\"paddingTop\":\"25%\",\"color\":\"#96999c\",\"textAlign\":\"center\"}},\"No Thumbnail\"),/*#__PURE__*/React.createElement(\"p\",{className:\"live_title\",title:obj.title},obj.title.substring(0,27)||'--',obj.title.length>27&&/*#__PURE__*/React.createElement(\"span\",null,\"...\")),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"11px\"}},obj.channel_name||'--'),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"10px\"}},/*#__PURE__*/React.createElement(\"span\",null,FormatDate(obj.start_time)||'--'),\" - \",/*#__PURE__*/React.createElement(\"span\",null,FormatDate(obj.expected_end_time)||'--'),\" \"),/*#__PURE__*/React.createElement(\"div\",null,obj.status==='Running'&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn\",style:{\"fontSize\":\"10px\"},onClick:_this2.redirectUrl.bind(_this2,obj.url)},\"Join Now\"),obj.status==='Upcoming'&&/*#__PURE__*/React.createElement(\"span\",{className:\"StatusWidget\"},\"Not Started Yet\"),obj.status==='Ended'&&/*#__PURE__*/React.createElement(\"span\",{className:\"StatusWidget\"},\"End\")))));}),this.state.feeds.today.length===0&&/*#__PURE__*/React.createElement(\"p\",{style:{\"textAlign\":\"center\",\"padding\":\"20px\",\"color\":\"#b0acac\"}},\"No Events For Today\"))),/*#__PURE__*/React.createElement(\"p\",{style:{\"color\":\"#838c90\"}},/*#__PURE__*/React.createElement(\"b\",null,\"Upcoming\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.feeds.upcoming.map(function(obj,k){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-6 col-md-6\",key:k},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"LiveCard\"},obj.thumbnail&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(BASEURL).concat(obj.thumbnail),className:\"live_img\",alt:obj.channel_name}),!obj.thumbnail&&/*#__PURE__*/React.createElement(\"div\",{style:{\"height\":\"150px\",\"width\":\"100%\",\"background\":\"#ccc\",\"paddingTop\":\"25%\",\"color\":\"#96999c\",\"textAlign\":\"center\"}},\"No Thumbnail\"),/*#__PURE__*/React.createElement(\"p\",{className:\"live_title\"},obj.title||'--'),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"11px\"}},obj.channel_name||'--'),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"10px\"}},/*#__PURE__*/React.createElement(\"span\",null,FormatDate(obj.start_time)||'--'),\" - \",/*#__PURE__*/React.createElement(\"span\",null,FormatDate(obj.expected_end_time)||'--'),\" \"))));}),this.state.feeds.upcoming.length===0&&/*#__PURE__*/React.createElement(\"p\",{style:{\"textAlign\":\"center\",\"padding\":\"20px\",\"color\":\"#b0acac\"}},\"No Upcomig Events\")))))))));}}]);return Dashboard;}(Component);export default withRouter(Dashboard);","map":{"version":3,"sources":["/home/saurabh/workspace/go/thehylm-client/client/src/components/dashboard.js"],"names":["React","Component","withRouter","Axios_Instance","BASEURL","ROUTES","checkAuthorization","getUserDetails","FormatDate","GetStatusByDateTime","Notification","DateDiffFormat","Dashboard","state","user","wishTitle","feeds","feed","feed_posts","props","setWishTitle","details","setState","fetchFeedPosts","fetchFeeds","currentDate","Date","currentTime","toString","split","timeSegments","get","event_feeds","_resp","data","success","msg","events","obj","i","length","s_dt","start_time","e_e_dt","expected_end_time","cur_date","setHours","_status","status","today","push","upcoming","show","response","e","target","value","fetch_feeds","reqBody","localStorage","getItem","post","post_feed","url","window","open","String","first_name","user_type","OnFeedFieldChange","bind","PostFeed","map","k","logo_url","channel_name","fontSize","color","created_at","thumbnail","title","substring","redirectUrl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'; \nimport { withRouter } from 'react-router-dom';\nimport { Axios_Instance} from '../utils/axiosInterceptor';\nimport { BASEURL, ROUTES} from '../config/routes';\nimport { checkAuthorization, getUserDetails, FormatDate, GetStatusByDateTime, Notification,DateDiffFormat } from '../utils';\n\nclass Dashboard extends Component {\n    constructor(){\n        super(); \n        this.state = {\n            user:{},\n            wishTitle : 'Good Morning',\n            feeds:{\"today\":[], \"upcoming\":[],\"completed\":[]},\n            feed:\"\",\n            feed_posts:[]\n        }\n    }\n\n    async componentDidMount(){\n        await checkAuthorization(this.props);\n        this.setWishTitle();\n        let details = getUserDetails();\n        this.setState({user:details});\n        this.fetchFeedPosts();\n        this.fetchFeeds();\n        \n    };\n\n    setWishTitle(){\n        let {wishTitle} = this.state;\n        let currentDate = new Date();\n        let currentTime = currentDate.toString().split(' ')[4]; \n        let timeSegments = currentTime.split(':');\n        if(timeSegments >= '12'){\n            wishTitle = 'Good After Noon';\n        }\n        if(timeSegments >= '17'){\n            wishTitle = 'Good Evening';\n        }\n        this.setState({wishTitle});\n    }; \n\n    async fetchFeeds(){\n        try{\n            let _resp = await Axios_Instance.get(`${ROUTES.event_feeds}`);\n            if(!_resp){\n                _resp = {data:{success:false, msg:'Unexpected error occured'} };\n                return;\n            }\n            if(_resp.data && _resp.data.success){\n                let { feeds } = this.state;\n                let data = _resp.data.data.events;\n                let obj = {\"today\":[], \"upcoming\":[]};\n                for(let i = 0; i < data.length; i++){\n                    let s_dt = data[i].start_time;\n                    let e_e_dt = data[i].expected_end_time;\n                    let cur_date = new Date().setHours(0,0,0,0);\n                    if(new Date(s_dt).setHours(0,0,0,0) <= cur_date && new Date(e_e_dt).setHours(0,0,0,0) >= cur_date){\n                        let _status = GetStatusByDateTime(data[i].start_time, data[i].expected_end_time);\n                        data[i].status = _status;\n                        obj.today.push(data[i])\n                    }else{\n                        obj.upcoming.push(data[i]);\n                    } \n                }\n                feeds = obj;\n                this.setState({ feeds });\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    }\n \n    OnFeedFieldChange(e){\n        let { feed } = this.state;\n        feed = e.target.value;\n        this.setState({ feed });\n    }\n\n    async fetchFeedPosts(){\n        try{\n            let _resp = await Axios_Instance.get(`${ROUTES.fetch_feeds}` );\n            \n            if(_resp && _resp.data && _resp.data.success){\n                let { feed_posts } = this.state;\n                feed_posts = _resp.data.data.feeds;\n                this.setState({feed_posts});\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    };\n    \n    async PostFeed(){\n        let { feed } = this.state;\n        if(!feed){\n            Notification({\n                show:true,\n                data:{success:false, msg:\"Nothing to post\"}});\n            return;\n        };\n        let reqBody  = {\n                \"feed\":feed, \n                \"channel_id\":localStorage.getItem(\"selItem\"), \n                \"type\":\"text\"\n            };\n        try{\n            let _resp = await Axios_Instance.post(`${ROUTES.post_feed}`,reqBody );\n            \n            if(_resp && _resp.data && _resp.data.success){\n                Notification({\n                    show:true,\n                    data:{success:true, msg:\"Post added successfully\"}});\n                this.fetchFeedPosts();\n                \n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        }         \n    }\n\n    redirectUrl(url){\n        window.open(url.String, \"_blank\")\n    }\n  render() {\n            return (\n                <div className=\"main-container\">\n                    <div className=\"container\">\n                        <h4 className=\"page-title\">\n                            <p style={{'textTransform':'capitalize'}}>{this.state.wishTitle}! {this.state.user.first_name || 'Guest'}</p>\n                        </h4> \n                        <div className=\"row\">\n                            <div className=\"col-md-6 col-sm-6\">\n                                <h6 className=\"theme-color\"><b>Feeds</b></h6>\n                                {this.state.user.user_type === 1 && <>\n                                    <textarea rows=\"2\" className=\"form-control\" name=\"feed\" placeholder=\"Write to share...\" onChange={this.OnFeedFieldChange.bind(this)}></textarea>\n                                    <div style={{\"float\":\"right\", \"marginTop\":\"5px\"}}>\n                                        <button className=\"btn btn-primary\" onClick={this.PostFeed.bind(this)}>POST</button>\n                                    </div>\n                                </>}\n\n                                <div className=\"feedPosts\">\n                                    {this.state.feed_posts.map((obj, k)=>\n                                        <div className=\"card eachFeedPost\" key={k}>\n                                            <div className=\"channelName\">\n                                                {obj.logo_url && <img src={`${BASEURL}${obj.logo_url}`} alt={obj.channel_name} />}\n                                                {!obj.logo_url && <div className=\"blankLogo\">{obj.channel_name[0]}</div>}\n                                                \n                                                <p>{obj.channel_name}</p>\n                                            </div>\n                                            <div style={{\"clear\":\"both\"}}>\n                                                <p>{obj.feed}</p>\n                                                <small style={{fontSize:\"10px\", color:\"#9fa2a4\"}}>{DateDiffFormat(obj.created_at) || '--'}</small>\n                                            </div>\n                                        </div>\n                                    )}\n                                    {this.state.feed_posts.length === 0 &&\n                                        <div style={{\"textAlign\":\"center\", \"padding\":\"20px\", \"color\":\"#b0acac\"}}>No New Feeds</div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"col-md-6 col-sm-6 borderLeft\" >\n                                <h6 className=\"theme-color\"><b>Events</b></h6>\n                                <div>\n                                    <div className=\"\">\n                                        <p style={{\"color\":\"#838c90\"}}><b>Today</b></p>\n                                        <div>\n                                            <div className=\"row\">\n                                                {this.state.feeds.today.map((obj, k)=>\n                                                    <div className=\"col-sm-6 col-md-6\" key={k}>\n                                                        <div className=\"card\">\n                                                            <div className=\"LiveCard\">\n                                                                {obj.thumbnail && <img src={`${BASEURL}${obj.thumbnail}`} className=\"live_img\" alt={obj.title}/>}\n                                                                {!obj.thumbnail && <div style={{\"height\":\"150px\",\"width\":\"100%\", \"background\":\"#ccc\",\"paddingTop\":\"25%\", \"color\":\"#96999c\", \"textAlign\":\"center\"}}>No Thumbnail</div>}\n                                                                \n                                                                <p className=\"live_title\" title={obj.title}>{obj.title.substring(0,27) || '--'}{obj.title.length > 27 &&<span>...</span>}</p>\n                                                                <p style={{\"fontSize\":\"11px\"}}>{obj.channel_name || '--'}</p>\n                                                                <p style={{\"fontSize\":\"10px\"}}><span>{FormatDate(obj.start_time) || '--'}</span> - <span>{FormatDate(obj.expected_end_time) || '--'}</span> </p>\n                                                                <div> \n                                                                    {obj.status === 'Running' &&  <button className=\"btn\" style={{\"fontSize\":\"10px\"}} onClick={this.redirectUrl.bind(this, obj.url)}>Join Now</button>}\n                                                                    {obj.status === 'Upcoming' &&  <span className=\"StatusWidget\">Not Started Yet</span>}\n                                                                    {obj.status === 'Ended' &&  <span className=\"StatusWidget\">End</span>}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                )}\n                                                {this.state.feeds.today.length === 0 &&\n                                                    <p style={{\"textAlign\":\"center\", \"padding\":\"20px\", \"color\":\"#b0acac\"}}>No Events For Today</p>\n                                                }\n                                                \n                                            </div>\n                                        </div>\n                                        <p style={{\"color\":\"#838c90\"}}><b>Upcoming</b></p>\n                                        <div>\n                                            <div className=\"row\">\n                                                {this.state.feeds.upcoming.map((obj, k)=>\n                                                    <div className=\"col-sm-6 col-md-6\" key={k}>\n                                                        <div className=\"card\">\n                                                            <div className=\"LiveCard\">\n                                                                {obj.thumbnail && <img src={`${BASEURL}${obj.thumbnail}`} className=\"live_img\" alt={obj.channel_name}/>}\n                                                                {!obj.thumbnail && <div style={{\"height\":\"150px\",\"width\":\"100%\", \"background\":\"#ccc\",\"paddingTop\":\"25%\", \"color\":\"#96999c\", \"textAlign\":\"center\"}}>No Thumbnail</div>}\n                                                                <p className=\"live_title\">{obj.title || '--'}</p>\n                                                                <p style={{\"fontSize\":\"11px\"}}>{obj.channel_name || '--'}</p>\n                                                                <p style={{\"fontSize\":\"10px\"}}><span>{FormatDate(obj.start_time) || '--'}</span> - <span>{FormatDate(obj.expected_end_time) || '--'}</span> </p>\n                                                                 \n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                )}\n                                                {this.state.feeds.upcoming.length === 0 &&\n                                                    <p style={{\"textAlign\":\"center\", \"padding\":\"20px\", \"color\":\"#b0acac\"}}>No Upcomig Events</p>\n                                                }\n                                            </div>\n                                        </div> \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                \n                </div>\n            );\n    }\n  \n}\n\nexport default withRouter(Dashboard);"]},"metadata":{},"sourceType":"module"}