{"ast":null,"code":"import _regeneratorRuntime from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{Axios_Instance}from'../utils/axiosInterceptor';import{ROUTES}from'../config/routes';import{checkAuthorization,getUserDetails}from'../utils';import{Notification}from'../utils';import ApartmentDetails from'./subComponents/apartment-details';import{connect}from'react-redux';import{ACTION_TYPES}from'../utils/actions';var BuildingDetails=/*#__PURE__*/function(_Component){_inherits(BuildingDetails,_Component);var _super=_createSuper(BuildingDetails);function BuildingDetails(){var _this;_classCallCheck(this,BuildingDetails);_this=_super.call(this);_this.state={user:{},wishTitle:'Good Morning',details:{},selectedFloor:null};_this._hideFloorDetails=_this._hideFloorDetails.bind(_assertThisInitialized(_this));return _this;}_createClass(BuildingDetails,[{key:\"componentDidMount\",value:function componentDidMount(){checkAuthorization(this.props);var details=getUserDetails();this.setState({user:details});var buildingId=this.props.match.params.b_id;if(!buildingId){alert('Invalid building id');return;}this.fetchBuildingDetails(buildingId);}},{key:\"fetchBuildingDetails\",value:function(){var _fetchBuildingDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(b_id){var details,_resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;details=this.state.details;_context.next=4;return Axios_Instance.get(\"\".concat(ROUTES.building_details).replace(':b_id',b_id));case 4:_resp=_context.sent;if(!_resp&&!_resp.data){_resp={data:{success:false,msg:'Unexpected erro occured'}};}details=_resp.data.data[0];this.setState({details:details});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);Notification({show:true,data:_context.t0.response?_context.t0.response.data:_context.t0});case 13:case\"end\":return _context.stop();}}},_callee,this,[[0,10]]);}));function fetchBuildingDetails(_x){return _fetchBuildingDetails.apply(this,arguments);}return fetchBuildingDetails;}()},{key:\"_showFloorDetails\",value:function _showFloorDetails(floor,k){if(floor){var selectedFloor=this.state.selectedFloor;selectedFloor=floor;this.setState({selectedFloor:selectedFloor});this.props.selectFloor(floor);}}},{key:\"_hideFloorDetails\",value:function _hideFloorDetails(){var selectedFloor=this.state.selectedFloor;selectedFloor=null;this.setState({selectedFloor:selectedFloor});}},{key:\"render\",value:function render(){var _this2=this;if(!Object.keys(this.state.details).length)return'Loading...';return/*#__PURE__*/React.createElement(\"div\",{className:\"main-container\",style:{'paddingTop':'0px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img_section\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../assets/images/default_banner.jpg\",alt:\"banner_img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bannerOverTitle\"},/*#__PURE__*/React.createElement(\"span\",{style:{'textTransform':'capitalize','marginBottom':'0px'}},this.state.details.name||'Unnamed Building'),/*#__PURE__*/React.createElement(\"span\",null,\" \\xA0(\",this.state.details.b_id||'--',\")\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Building Address\"),/*#__PURE__*/React.createElement(\"p\",null,this.state.details.address.address1,\",\",this.state.details.address.address2,\",\",this.state.details.address.pincode,\",\",this.state.details.address.country)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Registered Owner\"),/*#__PURE__*/React.createElement(\"p\",null,this.state.details.registered_owner_name||'No Registered Owner')),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3\"},/*#__PURE__*/React.createElement(\"label\",null,\"No. of Floors\"),/*#__PURE__*/React.createElement(\"p\",null,this.state.details.total_floors)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3\"},/*#__PURE__*/React.createElement(\"label\",null,\"No. of Apartments\"),/*#__PURE__*/React.createElement(\"p\",null,this.state.details.total_apartments)))),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Floor Details\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.details.floors.map(function(floor,k){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3 col-xs-12\",key:k},/*#__PURE__*/React.createElement(\"div\",{className:\"card \".concat(_this2.state.selectedFloor&&_this2.state.selectedFloor._id===floor._id?'dark_card':'')},/*#__PURE__*/React.createElement(\"h5\",{className:\"theme-color\"},\"Floor \",floor.floor_no),/*#__PURE__*/React.createElement(\"small\",null,\"Active Apartments/Rooms: \",floor.apartments||0),/*#__PURE__*/React.createElement(\"p\",{className:\"pull-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"theme-color cursor\",onClick:_this2._showFloorDetails.bind(_this2,floor,k)},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-arrow-right-circle icons\"})))));}))),this.state.selectedFloor&&/*#__PURE__*/React.createElement(ApartmentDetails,Object.assign({},this.state,{hideWindow:this._hideFloorDetails}))))));}}]);return BuildingDetails;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{'selectFloor':function selectFloor(data){return dispatch({'type':ACTION_TYPES.SELECTED_FLOORS,data:data});}};};export default connect(null,mapDispatchToProps)(withRouter(BuildingDetails));","map":{"version":3,"sources":["/home/saurabh/workspace/go/thehylm-client/client/src/components/building-details.js"],"names":["React","Component","withRouter","Link","Axios_Instance","ROUTES","checkAuthorization","getUserDetails","Notification","ApartmentDetails","connect","ACTION_TYPES","BuildingDetails","state","user","wishTitle","details","selectedFloor","_hideFloorDetails","bind","props","setState","buildingId","match","params","b_id","alert","fetchBuildingDetails","get","building_details","replace","_resp","data","success","msg","show","response","floor","k","selectFloor","Object","keys","length","name","address","address1","address2","pincode","country","registered_owner_name","total_floors","total_apartments","floors","map","_id","floor_no","apartments","_showFloorDetails","mapDispatchToProps","dispatch","SELECTED_FLOORS"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'; \nimport { withRouter, Link } from 'react-router-dom';\nimport { Axios_Instance } from '../utils/axiosInterceptor';\nimport { ROUTES} from '../config/routes';\nimport { checkAuthorization, getUserDetails } from '../utils';\nimport {Notification} from '../utils';\nimport ApartmentDetails from './subComponents/apartment-details';\nimport { connect } from 'react-redux';\nimport { ACTION_TYPES } from '../utils/actions';\n\nclass BuildingDetails extends Component {\n    constructor(){\n        super(); \n        this.state = {\n            user:{},\n            wishTitle : 'Good Morning',\n            details:{},\n            selectedFloor:null\n        };\n        this._hideFloorDetails = this._hideFloorDetails.bind(this)\n    }\n\n    componentDidMount(){\n        checkAuthorization(this.props);\n        let details = getUserDetails();\n        this.setState({user:details});\n        let buildingId = this.props.match.params.b_id;\n        if(!buildingId) {\n            alert('Invalid building id');\n            return;\n        }\n        this.fetchBuildingDetails(buildingId);\n        \n    };\n     \n\n    async fetchBuildingDetails(b_id){\n        try{\n            let { details} = this.state;\n            let _resp = await Axios_Instance.get(`${ROUTES.building_details}`.replace(':b_id',b_id));\n            if(!_resp && !_resp.data){_resp = {data:{success:false, msg:'Unexpected erro occured'} };}\n            details = _resp.data.data[0];\n            this.setState({details});\n        }catch(ex){\n            Notification({\n                show:true,\n                data:ex.response ?ex.response.data : ex});\n            }\n        \n    }\n\n    _showFloorDetails(floor, k){\n        if(floor){\n            let { selectedFloor } = this.state;\n            selectedFloor = floor;\n            this.setState({selectedFloor});\n            this.props.selectFloor(floor);\n        }\n    };\n\n    _hideFloorDetails(){\n        let {selectedFloor} = this.state;\n        selectedFloor = null;\n        this.setState({selectedFloor});\n    }\n\n  render() {\n        if(!Object.keys(this.state.details).length) return ('Loading...')\n            return (\n                <div className=\"main-container\" style={{'paddingTop':'0px'}}>\n                <div className=\"container\">\n                    <div className=\"img_section\">\n                        <img src=\"../assets/images/default_banner.jpg\" alt=\"banner_img\" />\n                        <div className=\"bannerOverTitle\" >\n                            <span style={{'textTransform':'capitalize', 'marginBottom':'0px'}}>{this.state.details.name || 'Unnamed Building'}</span> \n                            <span> &nbsp;({this.state.details.b_id || '--'})</span>\n                        </div>\n                        \n                    </div>\n                    \n\n                    <div className=\"card\">\n                        <div className=\"row\">\n                            <div className=\"col-md-3 col-sm-3\">\n                                <label>Building Address</label>\n                                <p>{this.state.details.address.address1},  \n                                 {this.state.details.address.address2},  \n                                 {this.state.details.address.pincode},  \n                                 {this.state.details.address.country}</p>\n                            </div>\n                            <div className=\"col-md-3 col-sm-3\">\n                                <label>Registered Owner</label>\n                                <p>{this.state.details.registered_owner_name || 'No Registered Owner'}</p>\n                            </div>\n                            <div className=\"col-md-3 col-sm-3\">\n                                <label>No. of Floors</label>\n                                <p>{this.state.details.total_floors}</p>\n                            </div>\n                            <div className=\"col-md-3 col-sm-3\">\n                                <label>No. of Apartments</label>\n                                <p>{this.state.details.total_apartments}</p>\n                            </div>\n                        </div> \n                    </div>\n                    <div className=\"\">\n                        <h5>Floor Details</h5>\n                        <div className=\"row\">\n                            <div className=\"col-md-12 col-sm-12\">\n                                <div className=\"row\">\n                                    {this.state.details.floors.map((floor, k)=>\n                                        \n                                            <div className=\"col-md-3 col-sm-3 col-xs-12\" key={k}>\n                                                <div className={`card ${this.state.selectedFloor && this.state.selectedFloor._id === floor._id ? 'dark_card':''}`}>\n                                                    <h5 className=\"theme-color\">Floor {floor.floor_no}</h5>\n                                                    <small>Active Apartments/Rooms: {floor.apartments || 0}</small>\n                                                    <p className=\"pull-right\"> \n                                                        <span className=\"theme-color cursor\" onClick={this._showFloorDetails.bind(this, floor, k)}><i className=\"icon-arrow-right-circle icons\"></i></span>\n                                                    </p>\n                                                </div>\n                                            </div>\n                                    )}\n                                </div>\n                            </div>\n                            {this.state.selectedFloor &&  <ApartmentDetails {...this.state} hideWindow={this._hideFloorDetails}/>} \n                        </div>\n                    </div>\n                </div>\n                 \n                </div>\n            );\n    }\n  \n}\nconst mapDispatchToProps = (dispatch)=>{\n    return{\n      'selectFloor':(data)=>dispatch({'type':ACTION_TYPES.SELECTED_FLOORS,data})\n    }\n  }\n\nexport default connect(null,mapDispatchToProps)(withRouter(BuildingDetails));"]},"metadata":{},"sourceType":"module"}