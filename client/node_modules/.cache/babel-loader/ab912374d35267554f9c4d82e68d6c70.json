{"ast":null,"code":"import _regeneratorRuntime from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/saurabh/workspace/go/thehylm-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter,Link}from'react-router-dom';import{CONFIGS}from'../../config';import{Axios_Instance,Ax}from'../../utils/axiosInterceptor';import{BASEURL,ROUTES}from'../../config/routes';import{Notification,getUserDetails}from'../../utils';var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(){var _this;_classCallCheck(this,Header);_this=_super.call(this);_this.state={\"channels\":[],\"selectedChannel\":\"\",\"userDetails\":{},\"showSearch\":false,\"query\":\"\",\"search_results\":[]};return _this;}_createClass(Header,[{key:\"componentDidMount\",value:function componentDidMount(){var urlName=window.location.pathname;var _this$state=this.state,selectedChannel=_this$state.selectedChannel,userDetails=_this$state.userDetails;userDetails=getUserDetails();if(urlName!='/'&&urlName!='/signin'&&urlName!='/signup'||Object.keys(userDetails).length>0)this.fetchChannels();var selected=localStorage.getItem(\"selItem\");selectedChannel=selected;this.setState({selectedChannel:selectedChannel,userDetails:userDetails});}},{key:\"_logout\",value:function _logout(){localStorage.removeItem(CONFIGS.uLocal);this.props.history.push('/');}},{key:\"onChangeChannel\",value:function onChangeChannel(e){var selectedChannel=this.state.selectedChannel;selectedChannel=e.target.value;localStorage.setItem(\"selItem\",selectedChannel);this.setState({selectedChannel:selectedChannel});}},{key:\"SearchChange\",value:function SearchChange(e){var query=this.state.query;query=e.target.value;this.setState({query:query});this.searchChannel();}},{key:\"toggleSearch\",value:function toggleSearch(){var showSearch=this.state.showSearch;showSearch=!showSearch;this.setState({showSearch:showSearch});}},{key:\"fetchChannels\",value:function(){var _fetchChannels=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _resp,_this$state2,channels,selectedChannel,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Axios_Instance.get(\"\".concat(ROUTES.fetch_channels));case 3:_resp=_context.sent;if(_resp){_context.next=6;break;}return _context.abrupt(\"return\");case 6:if(_resp&&_resp.data&&_resp.data.success){_this$state2=this.state,channels=_this$state2.channels,selectedChannel=_this$state2.selectedChannel;data=_resp.data.data.channels;channels=data;localStorage.setItem(\"selItem\",channels.length?channels[0].id:[]);sessionStorage.setItem(\"channels\",JSON.stringify(channels));this.setState({channels:channels});}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"sdp\");Notification({show:true,data:_context.t0.response?_context.t0.response.data:_context.t0});case 13:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function fetchChannels(){return _fetchChannels.apply(this,arguments);}return fetchChannels;}()},{key:\"searchChannel\",value:function(){var _searchChannel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var query,_resp,search_results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;query=this.state.query;_context2.next=4;return Axios_Instance.get(\"\".concat(ROUTES.search_channel,\"?q=\").concat(query));case 4:_resp=_context2.sent;if(_resp){_context2.next=8;break;}_resp={data:{success:false,msg:'Unexpected error occured'}};return _context2.abrupt(\"return\");case 8:if(_resp.data&&_resp.data.success){search_results=this.state.search_results;search_results=_resp.data.data.results;this.setState({search_results:search_results});}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);Notification({show:true,data:{success:false,msg:_context2.t0?_context2.t0.response?_context2.t0.response.data:_context2.t0:\"Exception ocurred\"}});case 14:case\"end\":return _context2.stop();}}},_callee2,this,[[0,11]]);}));function searchChannel(){return _searchChannel.apply(this,arguments);}return searchChannel;}()},{key:\"addToWatchlist\",value:function(){var _addToWatchlist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(obj){var reqData,_resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;reqData={\"channel_id\":obj.id};_context3.next=4;return Axios_Instance.post(\"\".concat(ROUTES.add_watchlist),reqData);case 4:_resp=_context3.sent;if(_resp){_context3.next=8;break;}_resp={data:{success:false,msg:'Unexpected error occured'}};return _context3.abrupt(\"return\");case 8:if(_resp.data&&_resp.data.success){alert(_resp.data.message);}_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);Notification({show:true,data:{success:false,msg:_context3.t0?_context3.t0.response?_context3.t0.response.data:_context3.t0:\"Exception ocurred\"}});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));function addToWatchlist(_x){return _addToWatchlist.apply(this,arguments);}return addToWatchlist;}()},{key:\"redirectURL\",value:function redirectURL(url){window.open(url,\"_blank\");}},{key:\"render\",value:function render(){var _this2=this;var urlName=window.location.pathname;if(urlName==='/'||urlName==='/signin'||urlName==='/signup')return null;return/*#__PURE__*/React.createElement(\"div\",{className:\"header-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3 col-xs-6\"},/*#__PURE__*/React.createElement(\"h4\",{style:{\"margin\":\"0px\"}},/*#__PURE__*/React.createElement(Link,{to:\"/dashboard\"},/*#__PURE__*/React.createElement(\"img\",{src:\"./assets/images/logo.png\",alt:\"thePuerta\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-sm-6 col-xs-6\"},this.state.showSearch&&/*#__PURE__*/React.createElement(\"div\",{style:{position:\"relative\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"search\",name:\"query\",autoComplete:\"off\",className:\"form-control\",onChange:this.SearchChange.bind(this),placeholder:\"Search Channel\",style:{\"width\":\"60%\",\"float\":\"right\"}}),this.state.search_results.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"search_results\"},this.state.search_results.map(function(obj,k){return/*#__PURE__*/React.createElement(\"div\",{className:\"EachSearchResult\",key:k},obj.logo_url&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(BASEURL).concat(obj.logo_url),style:{\"width\":\"50px\",\"height\":\"50px\",\"float\":\"left\",\"objectFit\":\"contain\"}}),!obj.logo_url&&/*#__PURE__*/React.createElement(\"div\",{className:\"blankImage\",style:{\"width\":\"50px\",\"height\":\"50px\",\"float\":\"left\",\"fontSize\":\"25px\"}},obj.channel_name[0]),/*#__PURE__*/React.createElement(\"div\",{className:\"SearchRow\"},/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"12px\",\"color\":\"#145391\"}},/*#__PURE__*/React.createElement(\"span\",{onClick:_this2.redirectURL.bind(_this2,obj.channel_url),className:\"theme-color\",style:{\"cursor\":\"pointer\"}},obj.channel_name||'--')),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"10px\"}},obj.type||'--',\" | \",obj.platform||'--'),/*#__PURE__*/React.createElement(\"p\",{style:{\"fontSize\":\"10px\"}},obj.added_watchlist===1&&/*#__PURE__*/React.createElement(\"span\",{className:\"search_link\"},\"Added To Watchlist\"),obj.added_watchlist===0&&/*#__PURE__*/React.createElement(\"span\",{className:\"search_link\",onClick:_this2.addToWatchlist.bind(_this2,obj)},\"Add To Watchlist\"),\" \")));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-sm-3 col-xs-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pull-right\"},this.state.userDetails.user_type===1&&/*#__PURE__*/React.createElement(\"select\",{style:{\"border\":\"none\",\"background\":'none'},value:this.state.selectedChannel,name:\"channels\",onChange:this.onChangeChannel.bind(this)},this.state.channels.map(function(obj,k){return/*#__PURE__*/React.createElement(\"option\",{key:k,value:obj.id},obj.channel_name);})),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/React.createElement(\"i\",{className:\"icon-magnifier icons\",style:{\"cursor\":\"pointer\",\"marginRight\":\"20px\"},onClick:this.toggleSearch.bind(this)}),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown\"},/*#__PURE__*/React.createElement(\"span\",{className:\"dropbtn\"},\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"icon-user icons\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-content\"},this.state.userDetails.user_type===1&&/*#__PURE__*/React.createElement(\"a\",{href:\"/feeds\"},\"\\xA0Your Feeds\"),this.state.userDetails.user_type===1&&/*#__PURE__*/React.createElement(\"a\",{href:\"/events\"},\"\\xA0Your Events\"),this.state.userDetails.user_type===1&&/*#__PURE__*/React.createElement(\"a\",{href:\"/channels\"},\"\\xA0Your Channels\"),/*#__PURE__*/React.createElement(\"a\",{href:\"/watchlists\"},\"\\xA0Your Watchlists\"),/*#__PURE__*/React.createElement(\"a\",{href:\"javascript:void\",onClick:this._logout.bind(this)},\"\\xA0Logout\"))))))));}}]);return Header;}(Component);export default withRouter(Header);","map":{"version":3,"sources":["/home/saurabh/workspace/go/thehylm-client/client/src/components/subComponents/header.js"],"names":["React","Component","withRouter","Link","CONFIGS","Axios_Instance","Ax","BASEURL","ROUTES","Notification","getUserDetails","Header","state","urlName","window","location","pathname","selectedChannel","userDetails","Object","keys","length","fetchChannels","selected","localStorage","getItem","setState","removeItem","uLocal","props","history","push","e","target","value","setItem","query","searchChannel","showSearch","get","fetch_channels","_resp","data","success","channels","id","sessionStorage","JSON","stringify","console","log","show","response","search_channel","msg","search_results","results","obj","reqData","post","add_watchlist","alert","message","url","open","position","SearchChange","bind","map","k","logo_url","channel_name","redirectURL","channel_url","type","platform","added_watchlist","addToWatchlist","user_type","onChangeChannel","toggleSearch","_logout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'; \nimport { withRouter,Link } from 'react-router-dom';\nimport {CONFIGS} from '../../config';\nimport { Axios_Instance, Ax } from '../../utils/axiosInterceptor';\nimport { BASEURL, ROUTES} from '../../config/routes';\nimport {Notification, getUserDetails} from '../../utils';\n\nclass Header extends Component {\n    constructor(){\n        super(); \n        this.state = {\n            \"channels\":[],\n            \"selectedChannel\":\"\",\n            \"userDetails\":{},\n            \"showSearch\":false,\n            \"query\":\"\",\n            \"search_results\":[],\n        }\n    }\n\n    componentDidMount(){\n\n        let urlName = window.location.pathname;\n        \n        let { selectedChannel, userDetails } = this.state;\n        userDetails = getUserDetails();\n        if((urlName != '/' && urlName != '/signin' && urlName != '/signup') || Object.keys(userDetails).length > 0) this.fetchChannels();\n        let selected = localStorage.getItem(\"selItem\");\n        selectedChannel = selected;\n        this.setState({ selectedChannel, userDetails });\n    }\n\n    _logout(){\n        localStorage.removeItem(CONFIGS.uLocal);\n        this.props.history.push('/');\n    }\n\n    onChangeChannel(e){\n        let { selectedChannel } = this.state;\n        selectedChannel = e.target.value;\n        localStorage.setItem(\"selItem\", selectedChannel);\n        this.setState({ selectedChannel }); \n    }\n    SearchChange(e){\n        let { query } = this.state;\n        query = e.target.value;\n        this.setState({ query });\n        this.searchChannel();\n    }\n    toggleSearch(){\n        let { showSearch } = this.state;\n        showSearch = !showSearch;\n        this.setState({ showSearch });\n    }\n\n    async fetchChannels(){\n        try{\n            let _resp = await Axios_Instance.get(`${ROUTES.fetch_channels}`);\n            if(!_resp){\n                return;\n            }\n            if(_resp &&_resp.data && _resp.data.success){\n                \n                let { channels, selectedChannel } = this.state;\n                let data = _resp.data.data.channels;\n                channels = data; \n                localStorage.setItem(\"selItem\", channels.length ? channels[0].id : []);\n                sessionStorage.setItem(\"channels\", JSON.stringify(channels));\n                this.setState({ channels });\n            }\n        }catch(ex){console.log(\"sdp\")\n            Notification({\n                show:true,\n                data:ex.response ?ex.response.data : ex});\n        } \n    }\n\n    async searchChannel(){\n        try{\n            let { query } = this.state;\n            let _resp = await Axios_Instance.get(`${ROUTES.search_channel}?q=${query}`);\n            if(!_resp){\n                _resp = {data:{success:false, msg:'Unexpected error occured'} };\n                return;\n            }\n            if(_resp.data && _resp.data.success){\n                let { search_results } = this.state;\n                search_results = _resp.data.data.results;\n                this.setState({ search_results });\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    }\n\n    async addToWatchlist(obj){\n        try{\n            let reqData = {\"channel_id\":obj.id};\n            let _resp = await Axios_Instance.post(`${ROUTES.add_watchlist}`, reqData );\n            if(!_resp){\n                _resp = {data:{success:false, msg:'Unexpected error occured'} };\n                return;\n            }\n            if(_resp.data && _resp.data.success){\n                alert(_resp.data.message);\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    }\n\n    redirectURL(url){\n        window.open(url, \"_blank\");\n    }\n\nrender() {\n    let urlName = window.location.pathname;\n    if(urlName === '/' || urlName === '/signin' || urlName === '/signup') return null;\n    return (\n        <div className=\"header-wrap\">\n        <div className=\"container\"> \n            <div className=\"row\"> \n            <div className=\"col-md-3 col-sm-3 col-xs-6\">\n               <h4 style={{\"margin\":\"0px\"}}><Link to={\"/dashboard\"}><img src={\"./assets/images/logo.png\"} alt=\"thePuerta\"/></Link></h4>\n            </div> \n            <div className=\"col-md-6 col-sm-6 col-xs-6\">\n                     {this.state.showSearch &&\n                        <div style={{position:\"relative\"}}> \n                             <input type=\"search\" name=\"query\" autoComplete=\"off\" className=\"form-control\" onChange={this.SearchChange.bind(this)} placeholder=\"Search Channel\" style={{\"width\":\"60%\", \"float\":\"right\"}}  />\n\n                            {this.state.search_results.length > 0 && \n                                <div className=\"search_results\">\n                                   {this.state.search_results.map((obj, k)=>\n                                    <div className=\"EachSearchResult\" key={k}>\n                                        {obj.logo_url && <img src={`${BASEURL}${obj.logo_url}`} style={{\"width\":\"50px\", \"height\":\"50px\",\"float\":\"left\",\"objectFit\":\"contain\"}} />}\n                                        {!obj.logo_url && <div className=\"blankImage\" style={{\"width\":\"50px\", \"height\":\"50px\", \"float\":\"left\", \"fontSize\":\"25px\"}}>{obj.channel_name[0]}</div>}\n                                        <div className=\"SearchRow\">\n                                            <p style={{\"fontSize\":\"12px\", \"color\":\"#145391\"}}><span onClick={this.redirectURL.bind(this, obj.channel_url)} className=\"theme-color\" style={{\"cursor\":\"pointer\"}}>{obj.channel_name || '--'}</span></p>\n                                            <p style={{\"fontSize\":\"10px\"}}>{obj.type || '--'} | {obj.platform || '--'}</p>\n                                            <p style={{\"fontSize\":\"10px\"}}>\n                                                {obj.added_watchlist === 1 && \n                                                    <span className=\"search_link\" >Added To Watchlist</span>\n                                                }\n                                                {obj.added_watchlist === 0 && \n                                                    <span className=\"search_link\" onClick={this.addToWatchlist.bind(this, obj)}>Add To Watchlist</span>\n                                                } </p>\n                                        </div>\n                                    </div>\n                                   )}\n                                </div>\n                            }\n                             \n                        </div>\n                    }\n            </div>\n            <div className=\"col-md-3 col-sm-3 col-xs-6\">\n                <div className=\"pull-right\">\n                    {this.state.userDetails.user_type === 1 &&\n                         <select style={{\"border\":\"none\",  \"background\":'none'}} value={this.state.selectedChannel} name=\"channels\" onChange={this.onChangeChannel.bind(this)}>\n                         {this.state.channels.map((obj, k)=>\n                             <option key={k} value={obj.id}>{obj.channel_name}</option>\n                         )}\n                         \n                     </select>\n                    }\n                    &nbsp;&nbsp;&nbsp;&nbsp;\n                    <i className=\"icon-magnifier icons\" style={{\"cursor\":\"pointer\", \"marginRight\":\"20px\"}} onClick={this.toggleSearch.bind(this)}></i> \n                    &nbsp;&nbsp;&nbsp;&nbsp;\n\n                    <div className=\"dropdown\">\n                        <span className=\"dropbtn\"> <i className=\"icon-user icons\"></i></span>\n                            <div className=\"dropdown-content\">\n                            {this.state.userDetails.user_type === 1 && <a href=\"/feeds\" >&nbsp;Your Feeds</a>}\n                            {this.state.userDetails.user_type === 1 && <a href=\"/events\" >&nbsp;Your Events</a>}\n                            {this.state.userDetails.user_type === 1 &&   <a href=\"/channels\" >&nbsp;Your Channels</a>}\n                                <a href=\"/watchlists\" >&nbsp;Your Watchlists</a>\n                                <a href=\"javascript:void\" onClick={this._logout.bind(this)}>&nbsp;Logout</a>\n                            </div>\n                        </div>\n                </div>\n            </div>\n            </div>\n        </div>\n        </div>\n    );\n    }\n  \n}\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}