{"ast":null,"code":"var _jsxFileName = \"/home/saurabh/workspace/go/bocadee-client/src/components/subComponents/header.js\";\nimport React, { Component } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nimport { CONFIGS } from '../../config';\nimport { Axios_Instance, Ax } from '../../utils/axiosInterceptor';\nimport { BASEURL, ROUTES } from '../../config/routes';\nimport { Notification, getUserDetails } from '../../utils';\n\nclass Header extends Component {\n  constructor() {\n    super();\n    this.state = {\n      \"channels\": [],\n      \"selectedChannel\": \"\",\n      \"userDetails\": {},\n      \"showSearch\": false,\n      \"query\": \"\",\n      \"search_results\": []\n    };\n  }\n\n  componentDidMount() {\n    let urlName = window.location.pathname;\n    let {\n      selectedChannel,\n      userDetails\n    } = this.state;\n    userDetails = getUserDetails();\n    if (urlName != '/' && urlName != '/signin' && urlName != '/signup' || Object.keys(userDetails).length > 0) this.fetchChannels();\n    let selected = localStorage.getItem(\"selItem\");\n    selectedChannel = selected;\n    this.setState({\n      selectedChannel,\n      userDetails\n    });\n  }\n\n  _logout() {\n    localStorage.removeItem(CONFIGS.uLocal);\n    this.props.history.push('/');\n  }\n\n  onChangeChannel(e) {\n    let {\n      selectedChannel\n    } = this.state;\n    selectedChannel = e.target.value;\n    localStorage.setItem(\"selItem\", selectedChannel);\n    this.setState({\n      selectedChannel\n    });\n  }\n\n  SearchChange(e) {\n    let {\n      query\n    } = this.state;\n    query = e.target.value;\n    this.setState({\n      query\n    });\n    this.searchChannel();\n  }\n\n  toggleSearch() {\n    let {\n      showSearch\n    } = this.state;\n    showSearch = !showSearch;\n    this.setState({\n      showSearch\n    });\n  }\n\n  async fetchChannels() {\n    try {\n      let _resp = await Axios_Instance.get(`${ROUTES.fetch_channels}`);\n\n      if (!_resp) {\n        return;\n      }\n\n      if (_resp && _resp.data && _resp.data.success) {\n        let {\n          channels,\n          selectedChannel\n        } = this.state;\n        let data = _resp.data.data.channels;\n        channels = data;\n        localStorage.setItem(\"selItem\", channels.length ? channels[0].id : []);\n        sessionStorage.setItem(\"channels\", JSON.stringify(channels));\n        this.setState({\n          channels\n        });\n      }\n    } catch (ex) {\n      console.log(\"sdp\");\n      Notification({\n        show: true,\n        data: ex.response ? ex.response.data : ex\n      });\n    }\n  }\n\n  async searchChannel() {\n    try {\n      let {\n        query\n      } = this.state;\n\n      let _resp = await Axios_Instance.get(`${ROUTES.search_channel}?q=${query}`);\n\n      if (!_resp) {\n        _resp = {\n          data: {\n            success: false,\n            msg: 'Unexpected error occured'\n          }\n        };\n        return;\n      }\n\n      if (_resp.data && _resp.data.success) {\n        let {\n          search_results\n        } = this.state;\n        search_results = _resp.data.data.results;\n        this.setState({\n          search_results\n        });\n      }\n    } catch (ex) {\n      Notification({\n        show: true,\n        data: {\n          success: false,\n          msg: ex ? ex.response ? ex.response.data : ex : \"Exception ocurred\"\n        }\n      });\n    }\n  }\n\n  async addToWatchlist(obj) {\n    try {\n      let reqData = {\n        \"channel_id\": obj.id\n      };\n\n      let _resp = await Axios_Instance.post(`${ROUTES.add_watchlist}`, reqData);\n\n      if (!_resp) {\n        _resp = {\n          data: {\n            success: false,\n            msg: 'Unexpected error occured'\n          }\n        };\n        return;\n      }\n\n      if (_resp.data && _resp.data.success) {\n        alert(_resp.data.message);\n      }\n    } catch (ex) {\n      Notification({\n        show: true,\n        data: {\n          success: false,\n          msg: ex ? ex.response ? ex.response.data : ex : \"Exception ocurred\"\n        }\n      });\n    }\n  }\n\n  render() {\n    let urlName = window.location.pathname;\n    if (urlName === '/' || urlName === '/signin' || urlName === '/signup') return null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-3 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        \"margin\": \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"./assets/images/logo.png\",\n      alt: \"thePuerta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 69\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-sm-6 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, this.state.showSearch && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: \"relative\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"search\",\n      name: \"query\",\n      autoComplete: \"off\",\n      className: \"form-control\",\n      onChange: this.SearchChange.bind(this),\n      placeholder: \"Search Channel\",\n      style: {\n        \"width\": \"60%\",\n        \"float\": \"right\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 30\n      }\n    }), this.state.search_results.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search_results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, this.state.search_results.map((obj, k) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"EachSearchResult\",\n      key: k,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 37\n      }\n    }, obj.logo_url && /*#__PURE__*/React.createElement(\"img\", {\n      src: `${BASEURL}${obj.logo_url}`,\n      style: {\n        \"width\": \"50px\",\n        \"height\": \"50px\",\n        \"float\": \"left\",\n        \"objectFit\": \"contain\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 58\n      }\n    }), !obj.logo_url && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blankImage\",\n      style: {\n        \"width\": \"50px\",\n        \"height\": \"50px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 59\n      }\n    }, obj.channel_name[0]), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"SearchRow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        \"fontSize\": \"12px\",\n        \"color\": \"#145391\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: obj.channel_url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 95\n      }\n    }, obj.channel_name || '--')), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        \"fontSize\": \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 45\n      }\n    }, obj.type || '--', \" | \", obj.platform || '--'), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        \"fontSize\": \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 45\n      }\n    }, obj.added_watchlist === 1 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"search_link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 53\n      }\n    }, \"Added To Watchlist\"), obj.added_watchlist === 0 && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"search_link\",\n      onClick: this.addToWatchlist.bind(this, obj),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 53\n      }\n    }, \"Add To Watchlist\"), \" \"))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3 col-sm-3 col-xs-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, this.state.userDetails.user_type === 1 && /*#__PURE__*/React.createElement(\"select\", {\n      style: {\n        \"border\": \"none\",\n        \"background\": 'none'\n      },\n      value: this.state.selectedChannel,\n      name: \"channels\",\n      onChange: this.onChangeChannel.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 26\n      }\n    }, this.state.channels.map((obj, k) => /*#__PURE__*/React.createElement(\"option\", {\n      key: k,\n      value: obj.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 30\n      }\n    }, obj.channel_name))), \"\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-magnifier icons\",\n      style: {\n        \"cursor\": \"pointer\"\n      },\n      onClick: this.toggleSearch.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }), \"\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"dropbtn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n      className: \"icon-user icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 52\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, this.state.userDetails.user_type === 1 && /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/feeds\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 72\n      }\n    }, \"\\xA0Your Feeds\"), this.state.userDetails.user_type === 1 && /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/events\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 72\n      }\n    }, \"\\xA0Your Events\"), this.state.userDetails.user_type === 1 && /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/channels\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 74\n      }\n    }, \"\\xA0Your Channels\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/watchlists\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, \"\\xA0Your Watchlists\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"javascript:void\",\n      onClick: this._logout.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }, \"\\xA0Logout\"))))))));\n  }\n\n}\n\nexport default withRouter(Header);","map":{"version":3,"sources":["/home/saurabh/workspace/go/bocadee-client/src/components/subComponents/header.js"],"names":["React","Component","withRouter","Link","CONFIGS","Axios_Instance","Ax","BASEURL","ROUTES","Notification","getUserDetails","Header","constructor","state","componentDidMount","urlName","window","location","pathname","selectedChannel","userDetails","Object","keys","length","fetchChannels","selected","localStorage","getItem","setState","_logout","removeItem","uLocal","props","history","push","onChangeChannel","e","target","value","setItem","SearchChange","query","searchChannel","toggleSearch","showSearch","_resp","get","fetch_channels","data","success","channels","id","sessionStorage","JSON","stringify","ex","console","log","show","response","search_channel","msg","search_results","results","addToWatchlist","obj","reqData","post","add_watchlist","alert","message","render","position","bind","map","k","logo_url","channel_name","channel_url","type","platform","added_watchlist","user_type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'; \nimport { withRouter,Link } from 'react-router-dom';\nimport {CONFIGS} from '../../config';\nimport { Axios_Instance, Ax } from '../../utils/axiosInterceptor';\nimport { BASEURL, ROUTES} from '../../config/routes';\nimport {Notification, getUserDetails} from '../../utils';\n\nclass Header extends Component {\n    constructor(){\n        super(); \n        this.state = {\n            \"channels\":[],\n            \"selectedChannel\":\"\",\n            \"userDetails\":{},\n            \"showSearch\":false,\n            \"query\":\"\",\n            \"search_results\":[],\n        }\n    }\n\n    componentDidMount(){\n\n        let urlName = window.location.pathname;\n        \n        let { selectedChannel, userDetails } = this.state;\n        userDetails = getUserDetails();\n        if((urlName != '/' && urlName != '/signin' && urlName != '/signup') || Object.keys(userDetails).length > 0) this.fetchChannels();\n        let selected = localStorage.getItem(\"selItem\");\n        selectedChannel = selected;\n        this.setState({ selectedChannel, userDetails });\n    }\n\n    _logout(){\n        localStorage.removeItem(CONFIGS.uLocal);\n        this.props.history.push('/');\n    }\n\n    onChangeChannel(e){\n        let { selectedChannel } = this.state;\n        selectedChannel = e.target.value;\n        localStorage.setItem(\"selItem\", selectedChannel);\n        this.setState({ selectedChannel }); \n    }\n    SearchChange(e){\n        let { query } = this.state;\n        query = e.target.value;\n        this.setState({ query });\n        this.searchChannel();\n    }\n    toggleSearch(){\n        let { showSearch } = this.state;\n        showSearch = !showSearch;\n        this.setState({ showSearch });\n    }\n\n    async fetchChannels(){\n        try{\n            let _resp = await Axios_Instance.get(`${ROUTES.fetch_channels}`);\n            if(!_resp){\n                return;\n            }\n            if(_resp &&_resp.data && _resp.data.success){\n                \n                let { channels, selectedChannel } = this.state;\n                let data = _resp.data.data.channels;\n                channels = data; \n                localStorage.setItem(\"selItem\", channels.length ? channels[0].id : []);\n                sessionStorage.setItem(\"channels\", JSON.stringify(channels));\n                this.setState({ channels });\n            }\n        }catch(ex){console.log(\"sdp\")\n            Notification({\n                show:true,\n                data:ex.response ?ex.response.data : ex});\n        } \n    }\n\n    async searchChannel(){\n        try{\n            let { query } = this.state;\n            let _resp = await Axios_Instance.get(`${ROUTES.search_channel}?q=${query}`);\n            if(!_resp){\n                _resp = {data:{success:false, msg:'Unexpected error occured'} };\n                return;\n            }\n            if(_resp.data && _resp.data.success){\n                let { search_results } = this.state;\n                search_results = _resp.data.data.results;\n                this.setState({ search_results });\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    }\n\n    async addToWatchlist(obj){\n        try{\n            let reqData = {\"channel_id\":obj.id};\n            let _resp = await Axios_Instance.post(`${ROUTES.add_watchlist}`, reqData );\n            if(!_resp){\n                _resp = {data:{success:false, msg:'Unexpected error occured'} };\n                return;\n            }\n            if(_resp.data && _resp.data.success){\n                alert(_resp.data.message);\n            }\n        }catch(ex){\n            Notification({\n                show:true,\n                data:{success:false, msg:ex ? (ex.response ?ex.response.data : ex) : \"Exception ocurred\"}});\n        } \n    }\n\n\nrender() {\n    let urlName = window.location.pathname;\n    if(urlName === '/' || urlName === '/signin' || urlName === '/signup') return null;\n    return (\n        <div className=\"header-wrap\">\n        <div className=\"container\"> \n            <div className=\"row\"> \n            <div className=\"col-md-3 col-sm-3 col-xs-6\">\n               <h4 style={{\"margin\":\"0px\"}}><Link to={\"/dashboard\"}><img src={\"./assets/images/logo.png\"} alt=\"thePuerta\"/></Link></h4>\n            </div> \n            <div className=\"col-md-6 col-sm-6 col-xs-6\">\n                     {this.state.showSearch &&\n                        <div style={{position:\"relative\"}}> \n                             <input type=\"search\" name=\"query\" autoComplete=\"off\" className=\"form-control\" onChange={this.SearchChange.bind(this)} placeholder=\"Search Channel\" style={{\"width\":\"60%\", \"float\":\"right\"}}  />\n\n                            {this.state.search_results.length > 0 && \n                                <div className=\"search_results\">\n                                   {this.state.search_results.map((obj, k)=>\n                                    <div className=\"EachSearchResult\" key={k}>\n                                        {obj.logo_url && <img src={`${BASEURL}${obj.logo_url}`} style={{\"width\":\"50px\", \"height\":\"50px\",\"float\":\"left\",\"objectFit\":\"contain\"}} />}\n                                        {!obj.logo_url && <div className=\"blankImage\" style={{\"width\":\"50px\", \"height\":\"50px\"}}>{obj.channel_name[0]}</div>}\n                                        <div className=\"SearchRow\">\n                                            <p style={{\"fontSize\":\"12px\", \"color\":\"#145391\"}}><Link to={obj.channel_url}>{obj.channel_name || '--'}</Link></p>\n                                            <p style={{\"fontSize\":\"10px\"}}>{obj.type || '--'} | {obj.platform || '--'}</p>\n                                            <p style={{\"fontSize\":\"10px\"}}>\n                                                {obj.added_watchlist === 1 && \n                                                    <span className=\"search_link\" >Added To Watchlist</span>\n                                                }\n                                                {obj.added_watchlist === 0 && \n                                                    <span className=\"search_link\" onClick={this.addToWatchlist.bind(this, obj)}>Add To Watchlist</span>\n                                                } </p>\n                                        </div>\n                                    </div>\n                                   )}\n                                </div>\n                            }\n                             \n                        </div>\n                    }\n            </div>\n            <div className=\"col-md-3 col-sm-3 col-xs-6\">\n                <div className=\"pull-right\">\n                    {this.state.userDetails.user_type === 1 &&\n                         <select style={{\"border\":\"none\",  \"background\":'none'}} value={this.state.selectedChannel} name=\"channels\" onChange={this.onChangeChannel.bind(this)}>\n                         {this.state.channels.map((obj, k)=>\n                             <option key={k} value={obj.id}>{obj.channel_name}</option>\n                         )}\n                         \n                     </select>\n                    }\n                    &nbsp;&nbsp;&nbsp;&nbsp;\n                    <i className=\"icon-magnifier icons\" style={{\"cursor\":\"pointer\"}} onClick={this.toggleSearch.bind(this)}></i> \n                    &nbsp;&nbsp;&nbsp;&nbsp;\n\n                    <div className=\"dropdown\">\n                        <span className=\"dropbtn\"> <i className=\"icon-user icons\"></i></span>\n                            <div className=\"dropdown-content\">\n                            {this.state.userDetails.user_type === 1 && <a href=\"/feeds\" >&nbsp;Your Feeds</a>}\n                            {this.state.userDetails.user_type === 1 && <a href=\"/events\" >&nbsp;Your Events</a>}\n                            {this.state.userDetails.user_type === 1 &&   <a href=\"/channels\" >&nbsp;Your Channels</a>}\n                                <a href=\"/watchlists\" >&nbsp;Your Watchlists</a>\n                                <a href=\"javascript:void\" onClick={this._logout.bind(this)}>&nbsp;Logout</a>\n                            </div>\n                        </div>\n                </div>\n            </div>\n            </div>\n        </div>\n        </div>\n    );\n    }\n  \n}\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}